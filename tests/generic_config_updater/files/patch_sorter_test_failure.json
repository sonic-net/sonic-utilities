{
    "EMPTYING_A_CONFIGDB_TABLE__FAILURE": {
        "desc": "Emptying a configdb table fails because empty tables are not allowed in configdb. User should remove whole table instead e.g. remove /ACL_TABLE in this case.",
        "current_config": {
            "ACL_TABLE": {
                "EVERFLOW": {
                    "policy_desc": "EVERFLOW",
                    "ports": [
                        "Ethernet0"
                    ],
                    "stage": "ingress",
                    "type": "MIRROR"
                }
            },
            "PORT": {
                "Ethernet0": {
                    "alias": "Eth1",
                    "lanes": "65, 66, 67, 68",
                    "description": "Ethernet0 100G link",
                    "speed": "100000"
                }
            }
        },
        "patch": [
            {"op": "remove", "path": "/ACL_TABLE/EVERFLOW"}
        ],
        "expected_error_substrings": [
            "There is no possible sorting"
        ]
    },
    "ADDING_AN_EMPTY_CONFIGDB_TABLE__FAILURE": {
        "desc": "Adding an empty configdb table fail because empty tables are not allowed in configdb.",
        "current_config": {},
        "patch": [
            {"op": "add", "path": "/VLAN", "value": {}}
        ],
        "expected_error_substrings": [
            "There is no possible sorting"
        ]
    },
    "EMPTYING_MULTIPLE_CONFIGDB_TABLE__FAILURE": {
        "desc": "Emptying multiple configdb table fails because empty tables are not allowed in configdb. User should remove whole tables instead  e.g. remove /PORT and /ACL_TABLE in this case.",
        "current_config": {
            "ACL_TABLE": {
                "EVERFLOW": {
                    "policy_desc": "EVERFLOW",
                    "ports": [
                        "Ethernet0"
                    ],
                    "stage": "ingress",
                    "type": "MIRROR"
                }
            },
            "PORT": {
                "Ethernet0": {
                    "alias": "Eth1",
                    "lanes": "65, 66, 67, 68",
                    "description": "Ethernet0 100G link",
                    "speed": "100000"
                }
            }
        },
        "patch": [
            {"op": "remove", "path": "/ACL_TABLE/EVERFLOW"},
            {"op": "remove", "path": "/PORT/Ethernet0"}
        ],
        "expected_error_substrings": [
            "There is no possible sorting"
        ]
    },
    "EMPTYING_A_CONFIGDB_TABLE_AND_CONFIG_HAS_NON_YANG_TABLE__FAILURE": {
        "desc": [
            "Emptying a configdb table fails because empty tables are not allowed in configdb.",
            "User should remove whole table instead e.g. remove /ACL_TABLE in this case.",
            "Also there is a table without YANG in the config, which the sorting logic will loop over.",
            "The sorting logic should fail with GenericConfigUpdaterError: 'There is no possible sorting' and not KeyError: 'TABLE_WITHOUT_YANG'"
        ],
        "current_config": {
            "TABLE_WITHOUT_YANG": {
                "key1": "value1",
                "key2": "value2"
            },
            "ACL_TABLE": {
                "EVERFLOW": {
                    "policy_desc": "EVERFLOW",
                    "ports": [
                        "Ethernet0"
                    ],
                    "stage": "ingress",
                    "type": "MIRROR"
                }
            },
            "PORT": {
                "Ethernet0": {
                    "alias": "Eth1",
                    "lanes": "65, 66, 67, 68",
                    "description": "Ethernet0 100G link",
                    "speed": "100000"
                }
            }
        },
        "patch": [
            {"op": "remove", "path": "/ACL_TABLE/EVERFLOW"}
        ],
        "expected_error_substrings": [
            "There is no possible sorting"
        ]
    },
    "VLAN_SUB_INTERFACE_CHANGE_VNET_ASSOCIATION__FAILURE": {
        "desc": [
            "Changing a VLAN subinterface VNET association fails.", 
            "If a subinterface is already associated with a VNET, it cannot be associated with a new VNET.",
            "e.g. Changing /VLAN_SUB_INTERFACE/Ethernet8.10/vnet_name from Vnet1 to Vnet2 fails."
        ],
        "current_config": {
            "VXLAN_TUNNEL": {
                "vtep1": {
                    "src_ip": "1.2.3.4"
                }
            },
            "VNET": {
                "Vnet1": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10011"
                },
                "Vnet2": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10012"
                }
            },
            "PORT": {
                "Ethernet8": {
                    "admin_status": "up",
                    "alias": "Ethernet8/1",
                    "description": "Ethernet8",
                    "lanes": "45,46,47,48",
                    "mtu": "9000",
                    "speed": "100000"
                }
            },
            "VLAN_SUB_INTERFACE": {
                "Ethernet8.10": {
                    "vnet_name": "Vnet1",
                    "vlan": 10
                },
                "Ethernet8.10|10.0.0.1/30": {
                    "ip-prefix": "10.0.0.1/30"
                }
            }
        },
        "patch": [
            {
                "op": "replace",
                "path": "/VLAN_SUB_INTERFACE/Ethernet8.10/vnet_name",
                "value": "Vnet2"
            }
        ],
        "expected_error_substrings": [
            "Vnet associations cannot be modified for interfaces: VLAN_SUB_INTERFACE/Ethernet8.10"
        ]
    },
    "VLAN_INTERFACE_CHANGE_VNET_ASSOCIATION__FAILURE": {
        "desc": [
            "Changing a VLAN interface VNET association fails.",
            "If an interface is already associated with a VNET, it cannot be associated with a new VNET.",
            "e.g. Changing /VLAN_INTERFACE/Vlan1000/vnet_name from Vnet1 to Vnet2 fails."
        ],
        "current_config": {
            "VXLAN_TUNNEL": {
                "vtep1": {
                    "src_ip": "1.2.3.4"
                }
            },
            "VNET": {
                "Vnet1": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10011"
                },
                "Vnet2": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10012"
                }
            },
            "VLAN": {
                "Vlan1000": {
                    "vlanid": "1000"
                }
            },
            "VLAN_INTERFACE": {
                "Vlan1000": {
                    "vnet_name": "Vnet1"
                },
                "Vlan1000|192.168.0.1/21": {}
            }
        },
        "patch": [
            {
                "op": "replace",
                "path": "/VLAN_INTERFACE/Vlan1000/vnet_name",
                "value": "Vnet2"
            }
        ],
        "expected_error_substrings": [
            "Vnet associations cannot be modified for interfaces: VLAN_INTERFACE/Vlan1000"
        ]
    },
    "INTERFACE_CHANGE_VNET_ASSOCIATION__FAILURE": {
        "desc": [
            "Changing a regular interface VNET association fails.",
            "If an interface is already associated with a VNET, it cannot be associated with a new VNET.",
            "e.g. Changing /INTERFACE/Ethernet8/vnet_name from Vnet1 to Vnet2 fails."
        ],
        "current_config": {
            "VXLAN_TUNNEL": {
                "vtep1": {
                    "src_ip": "1.2.3.4"
                }
            },
            "VNET": {
                "Vnet1": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10011"
                },
                "Vnet2": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10012"
                }
            },
            "PORT": {
                "Ethernet8": {
                    "admin_status": "up",
                    "alias": "Ethernet8/1",
                    "description": "Ethernet8",
                    "lanes": "45,46,47,48",
                    "mtu": "9000",
                    "speed": "100000"
                }
            },
            "INTERFACE": {
                "Ethernet8": {
                    "vnet_name": "Vnet1"
                },
                "Ethernet8|10.0.0.1/30": {}
            }
        },
        "patch": [
            {
                "op": "replace",
                "path": "/INTERFACE/Ethernet8/vnet_name",
                "value": "Vnet2"
            }
        ],
        "expected_error_substrings": [
            "Vnet associations cannot be modified for interfaces: INTERFACE/Ethernet8"
        ]
    },
    "MULTIPLE_INTERFACES_CHANGE_VNET_ASSOCIATION__FAILURE": {
        "desc": [
            "Changing multiple interfaces VNET associations fails.",
            "If interfaces are already associated with a VNET, they cannot be associated with a new VNET.",
            "e.g. Changing VNET associations for Ethernet8, Vlan1000 and Ethernet8.10 fails."
        ],
        "current_config": {
            "VXLAN_TUNNEL": {
                "vtep1": {
                    "src_ip": "1.2.3.4"
                }
            },
            "VNET": {
                "Vnet1": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10011"
                },
                "Vnet2": {
                    "vxlan_tunnel": "vtep1",
                    "vni": "10012"
                }
            },
            "PORT": {
                "Ethernet8": {
                    "admin_status": "up",
                    "alias": "Ethernet8/1",
                    "description": "Ethernet8",
                    "lanes": "45,46,47,48",
                    "mtu": "9000",
                    "speed": "100000"
                }
            },
            "VLAN": {
                "Vlan1000": {
                    "vlanid": "1000"
                }
            },
            "VLAN_INTERFACE": {
                "Vlan1000": {
                    "vnet_name": "Vnet1"
                },
                "Vlan1000|192.168.0.1/21": {}
            },
            "INTERFACE": {
                "Ethernet8": {
                    "vnet_name": "Vnet1"
                },
                "Ethernet8|10.0.0.1/30": {}
            },
            "VLAN_SUB_INTERFACE": {
                "Ethernet8.10": {
                    "vnet_name": "Vnet1",
                    "vlan": 10
                },
                "Ethernet8.10|10.0.0.1/30": {
                    "ip-prefix": "10.0.0.1/30"
                }
            }
        },
        "patch": [
            {
                "op": "replace",
                "path": "/VLAN_INTERFACE/Vlan1000/vnet_name",
                "value": "Vnet2"
            },
            {
                "op": "replace",
                "path": "/INTERFACE/Ethernet8/vnet_name",
                "value": "Vnet2"
            },
            {
                "op": "replace",
                "path": "/VLAN_SUB_INTERFACE/Ethernet8.10/vnet_name",
                "value": "Vnet2"
            }
        ],
        "expected_error_substrings": [
            "Vnet associations cannot be modified for interfaces: ",
            "INTERFACE/Ethernet8, VLAN_SUB_INTERFACE/Ethernet8.10, VLAN_INTERFACE/Vlan1000"
        ]
    }
}